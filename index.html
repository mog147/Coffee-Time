<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#faf9f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Coffee Time</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body>
    <div class="topbar">
        <h1>Coffee Time</h1>
    </div>

    <main>
        <!-- Home / Today -->
        <section id="page-home" class="page active">
            <div class="greeting" id="greeting"></div>

            <div class="tip-card">
                <span class="mi" style="font-size:16px;color:var(--coffee)">lightbulb</span>
                <span id="daily-tip" style="font-size:12px;color:var(--text2);line-height:1.6"></span>
            </div>

            <div class="today-stats" id="today-stats"></div>

            <div class="section-label">TODAY'S COFFEE</div>
            <div id="today-log"></div>
            <button class="btn-add" onclick="openLogModal()">
                <span class="mi">add</span> 記録する
            </button>

            <div class="section-label" style="margin-top:24px">QUICK TIMER</div>
            <div class="timer-presets">
                <button class="preset-btn" onclick="startQuickTimer('ハンドドリップ',240)">
                    <span class="mi" style="font-size:20px">coffee</span>
                    <span class="preset-name">ドリップ</span>
                    <span class="preset-time">4:00</span>
                </button>
                <button class="preset-btn" onclick="startQuickTimer('エスプレッソ',30)">
                    <span class="mi" style="font-size:20px">local_cafe</span>
                    <span class="preset-name">エスプレッソ</span>
                    <span class="preset-time">0:30</span>
                </button>
                <button class="preset-btn" onclick="startQuickTimer('フレンチプレス',240)">
                    <span class="mi" style="font-size:20px">water_drop</span>
                    <span class="preset-name">フレンチプレス</span>
                    <span class="preset-time">4:00</span>
                </button>
            </div>
        </section>

        <!-- Timer -->
        <section id="page-timer" class="page">
            <div class="timer-display">
                <div class="timer-time" id="timer-display">0:00</div>
                <div class="timer-label" id="timer-label">タイマーを選択</div>
                <div class="progress-bar"><div class="progress-fill" id="timer-progress"></div></div>
            </div>

            <div class="timer-controls">
                <button class="timer-ctrl-btn" onclick="resetTimer()" id="btn-reset" disabled>
                    <span class="mi">replay</span>
                </button>
                <button class="timer-main-btn" onclick="toggleTimer()" id="btn-toggle" disabled>
                    <span class="mi" id="toggle-icon">play_arrow</span>
                </button>
                <button class="timer-ctrl-btn" onclick="stopTimer()" id="btn-stop" disabled>
                    <span class="mi">stop</span>
                </button>
            </div>

            <div class="section-label">PRESETS</div>
            <div class="method-list">
                <div class="method-item" onclick="selectMethod('ハンドドリップ',240)">
                    <span class="mi method-icon">coffee</span>
                    <div class="method-info">
                        <div class="method-name">ハンドドリップ</div>
                        <div class="method-desc">蒸らし30秒 → 注ぎ3分30秒</div>
                    </div>
                    <span class="method-time">4:00</span>
                </div>
                <div class="method-item" onclick="selectMethod('エスプレッソ',30)">
                    <span class="mi method-icon">local_cafe</span>
                    <div class="method-info">
                        <div class="method-name">エスプレッソ</div>
                        <div class="method-desc">抽出25〜30秒</div>
                    </div>
                    <span class="method-time">0:30</span>
                </div>
                <div class="method-item" onclick="selectMethod('フレンチプレス',240)">
                    <span class="mi method-icon">water_drop</span>
                    <div class="method-info">
                        <div class="method-name">フレンチプレス</div>
                        <div class="method-desc">お湯を注いで4分待つ</div>
                    </div>
                    <span class="method-time">4:00</span>
                </div>
                <div class="method-item" onclick="selectMethod('エアロプレス',90)">
                    <span class="mi method-icon">filter_alt</span>
                    <div class="method-info">
                        <div class="method-name">エアロプレス</div>
                        <div class="method-desc">浸漬1分 → プレス30秒</div>
                    </div>
                    <span class="method-time">1:30</span>
                </div>
                <div class="method-item" onclick="selectMethod('水出し',43200)">
                    <span class="mi method-icon">ac_unit</span>
                    <div class="method-info">
                        <div class="method-name">水出しコーヒー</div>
                        <div class="method-desc">冷蔵庫で12時間</div>
                    </div>
                    <span class="method-time">12:00:00</span>
                </div>
            </div>
        </section>

        <!-- News -->
        <section id="page-news" class="page">
            <div class="section-label">LATEST</div>
            <div id="news-container">
                <div class="skeleton"></div>
                <div class="skeleton"></div>
                <div class="skeleton"></div>
            </div>
        </section>

        <!-- Log / Diary -->
        <section id="page-log" class="page">
            <div class="log-summary" id="log-summary"></div>
            <div class="section-label">HISTORY</div>
            <div id="log-list"></div>
            <div class="empty-state" id="log-empty">
                <span class="mi" style="font-size:32px;color:var(--text3)">coffee</span>
                <p>まだ記録がありません</p>
            </div>
        </section>
    </main>

    <!-- Bottom Nav -->
    <nav class="bottom-nav">
        <button class="nav-item active" data-page="home" onclick="navigate('home')">
            <span class="mi">home</span>
            <span class="nav-label">ホーム</span>
        </button>
        <button class="nav-item" data-page="timer" onclick="navigate('timer')">
            <span class="mi">timer</span>
            <span class="nav-label">タイマー</span>
        </button>
        <button class="nav-item" data-page="news" onclick="navigate('news')">
            <span class="mi">newspaper</span>
            <span class="nav-label">ニュース</span>
        </button>
        <button class="nav-item" data-page="log" onclick="navigate('log')">
            <span class="mi">book</span>
            <span class="nav-label">記録</span>
        </button>
    </nav>

    <!-- Coffee Log Modal -->
    <div id="log-overlay" class="modal-overlay" onclick="closeLogModal()"></div>
    <div id="log-modal" class="modal">
        <div class="modal-handle"></div>
        <h3>コーヒーを記録</h3>
        <div class="form-group">
            <label>抽出方法</label>
            <select id="log-method">
                <option>ハンドドリップ</option>
                <option>エスプレッソ</option>
                <option>フレンチプレス</option>
                <option>エアロプレス</option>
                <option>水出し</option>
                <option>カフェで購入</option>
            </select>
        </div>
        <div class="form-group">
            <label>豆・メモ</label>
            <input type="text" id="log-beans" placeholder="例: エチオピア イルガチェフェ">
        </div>
        <div class="form-group">
            <label>評価</label>
            <div class="rating" id="rating">
                <span class="star" onclick="setRating(1)">★</span>
                <span class="star" onclick="setRating(2)">★</span>
                <span class="star" onclick="setRating(3)">★</span>
                <span class="star" onclick="setRating(4)">★</span>
                <span class="star" onclick="setRating(5)">★</span>
            </div>
        </div>
        <button class="btn-save" onclick="saveLogEntry()">保存</button>
    </div>

    <script src="app.js"></script>
</body>

</html>
